import React, { useEffect, useState, useRef } from "react";
import styles from "./AnimatedBackground.module.scss";
import logoSVG from "../../../public/logo.svg";

const AnimatedBackground = () => {
  let x = 0,
    y = 0,
    dirX = 1,
    dirY = 1;
  const speed = 1;
  const pallete = ["#ff8800", "#e124ff", "#6a19ff", "#ff2188"];
  const dvd = useRef(null);
  let prevColorChoiceIndex = 0;
  let dvdHeight = 100;
  let dvdWidth = 150;
  if (dvd.current) {
    dvd.current.querySelector(".cls1").styles.cls1 = pallete[0];
    dvd.current.style.backgroundColor = pallete[0];
  }

  function getNewRandomColor() {
    const currentPallete = [...pallete];
    currentPallete.splice(prevColorChoiceIndex, 1);
    const colorChoiceIndex = Math.floor(Math.random() * currentPallete.length);
    prevColorChoiceIndex =
      colorChoiceIndex < prevColorChoiceIndex
        ? colorChoiceIndex
        : colorChoiceIndex + 1;
    const colorChoice = currentPallete[colorChoiceIndex];
    return colorChoice;
  }
  function animate() {
    const screenHeight = document.body.clientHeight;
    const screenWidth = document.body.clientWidth;

    if (y + dvdHeight >= screenHeight || y < 0) {
      dirY *= -1;
      // dvd.current.style.backgroundColor = getNewRandomColor();
    }
    if (x + dvdWidth >= screenWidth || x < 0) {
      dirX *= -1;

      // dvd.current.style.backgroundColor = getNewRandomColor();
    }
    x += dirX * speed;
    y += dirY * speed;
    dvd.current.style.left = x + "px";
    dvd.current.style.top = y + "px";
    window.requestAnimationFrame(animate);
  }

  window.requestAnimationFrame(animate);

  return (
    <div id="black" className={styles.black}>
      <svg
        ref={dvd}
        className={styles.dvd}
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 348.6 219.9"
      >
        <defs></defs>
        <g id="Layer_2" data-name="Layer 2">
          <g id="Layer_1-2" data-name="Layer 1">
            <polygon
              className={styles.cls1}
              points="9.72 27.48 0 190.14 304.99 219.9 348.6 51.05 9.72 27.48"
            />
            <polygon
              className={styles.cls2}
              points="25.93 210.4 23.28 56.58 326.5 0 299.98 169.14 25.93 210.4"
            />
            <path
              className={styles.cls3}
              d="M48.33,163.1V126.71h26v5.19h5.2v10.4h-5.2v5.2h5.2v10.4h-5.2v5.2Zm10.4-20.8h10.4V131.9H58.73Zm10.4,5.2H58.73v10.4h10.4Z"
            />
            <path
              className={styles.cls3}
              d="M89.93,157.9h-5.2V137.1h10.4v20.8h10.4V137.1h10.39v20.8h-5.2v5.2H89.93Z"
            />
            <path
              className={styles.cls3}
              d="M152.32,173.5h-26v-5.2h15.6v-5.2h-15.6v-5.2h-5.2V142.3h5.2v-5.2h26Zm-10.4-31.2h-10.4v15.6h10.4Z"
            />
            <path
              className={styles.cls3}
              d="M183.52,131.9h5.2v10.4h-5.2v5.2h-15.6v15.6h-10.4V126.71h26Zm-5.2,10.4V131.9h-10.4v10.4Z"
            />
            <path
              className={styles.cls3}
              d="M193.92,131.9v-5.19h10.4v5.19Zm0,31.2v-26h10.4v26Z"
            />
            <path
              className={styles.cls3}
              d="M209.52,163.1v-5.2h5.2v-5.2h5.2v-5.2h-5.2v-5.2h-5.2v-5.2h10.4v5.2h10.4v-5.2h10.4v5.2h-5.2v5.2h-5.2v5.2h5.2v5.2h5.2v5.2h-10.4v-5.2h-10.4v5.2Z"
            />
            <path
              className={styles.cls3}
              d="M271.92,137.1v5.2h5.2v10.4h-20.8v5.2h20.8v5.2h-26v-5.2h-5.2V142.3h5.2v-5.2Zm-5.2,5.2h-10.4v5.2h10.4Z"
            />
            <path
              className={styles.cls3}
              d="M292.72,163.1h-10.4V126.71h10.4Z"
            />
            <path
              className={styles.cls3}
              d="M170.28,119H132.6a8.64,8.64,0,0,1-8.75-8.73q0-23.11,0-46.25a8.09,8.09,0,0,1,7-8.11,9.42,9.42,0,0,1,1.4-.1c6.3,0,12.6,0,18.9,0a2.08,2.08,0,0,0,2-1.2c1.34-2.43,2.66-4.86,4.05-7.25a5,5,0,0,1,4.37-2.6c5.09-.13,10.18-.07,15.26-.06a18.85,18.85,0,0,1,3.28.1A5.37,5.37,0,0,1,184,47.59l3.72,6.69c.13.24.27.48.41.71a1.69,1.69,0,0,0,1.55.84c6.25,0,12.49,0,18.73,0A8,8,0,0,1,216,61.56a8.33,8.33,0,0,1,.33,2.48q0,23,0,46a8.81,8.81,0,0,1-2.33,6.37,8,8,0,0,1-6,2.63q-18.87,0-37.74,0Zm-1.1-2.38h2.74a22.51,22.51,0,0,0,5.88-.89,28.08,28.08,0,0,0,16.52-12.3,27.12,27.12,0,0,0,4.44-13.4c0-.33.07-1.91,0-2.9a26.82,26.82,0,0,0-2.34-10.1A28.54,28.54,0,0,0,179,61a22.73,22.73,0,0,0-7.12-1.29c-.41,0-2.39,0-2.81,0a21.42,21.42,0,0,0-5,.71c-9.35,2.47-15.83,8.27-19.67,17.08a25.64,25.64,0,0,0-2.16,9.92c0,.43,0,.85,0,1.31s0,1,.06,1.62a16.18,16.18,0,0,0,.5,3.59A29.37,29.37,0,0,0,151.41,109a31,31,0,0,0,5.53,4.16,24.76,24.76,0,0,0,6,2.45,26.1,26.1,0,0,0,6.27,1M205,63h-3.93c-.87,0-1.24.37-1.24,1.25v6.51a1,1,0,0,0,1,1.09c.47,0,.94,0,1.41,0h6.69c.91,0,1.32-.33,1.33-1.1q0-3.26,0-6.51A1.11,1.11,0,0,0,209,63Zm-70.13,7.54h0c1.11,0,2.23,0,3.34,0a2,2,0,0,0,2-2c0-.78,0-1.56,0-2.34a2.17,2.17,0,0,0-2.17-2.23q-3.34,0-6.69,0a2.06,2.06,0,0,0-2,2.09c0,.82,0,1.64,0,2.46a2,2,0,0,0,1.92,2C132.48,70.55,133.67,70.51,134.87,70.51Z"
            />
            <path
              className={styles.cls3}
              d="M200.71,54c-1.74,0-3.48,0-5.22,0a1.59,1.59,0,0,1-1.5-2.54,2,2,0,0,1,1.86-1.09c2.45,0,4.89,0,7.34,0,.8,0,1.6,0,2.4,0a2.08,2.08,0,0,1,2.08,2.31A1.24,1.24,0,0,1,206.29,54h-5.58Z"
            />
            <path
              className={styles.cls3}
              d="M202.15,44.67h1.11a.57.57,0,0,1,.62.62c0,.74,0,1.48,0,2.23a.64.64,0,0,1-.72.67h-2.1a.69.69,0,0,1-.77-.76c0-.68,0-1.37,0-2a.66.66,0,0,1,.79-.72C201.45,44.68,201.8,44.66,202.15,44.67Z"
            />
            <path
              className={styles.cls3}
              d="M210.85,46h.93a.68.68,0,0,1,.79.78c0,.61,0,1.21,0,1.82s-.24.8-.76.8c-.67,0-1.33,0-2,0-.51,0-.76-.21-.76-.73s0-1.33,0-2a.59.59,0,0,1,.67-.68h1.11Z"
            />
            <path
              className={styles.cls3}
              d="M214.38,51.37c1.06,0,1.06,0,1.06,1.1s0,1.13-1.11,1.13-1.09,0-1.09-1.09S213.24,51.35,214.38,51.37Z"
            />
            <path
              className={styles.cls3}
              d="M208.05,43.29c0,1.14,0,1.14-1.13,1.14s-1.09,0-1.09-1.12,0-1.1,1.1-1.1H207C208.05,42.21,208.05,42.21,208.05,43.29Z"
            />
            <path
              className={styles.cls3}
              d="M170.62,114.32A25.2,25.2,0,0,1,150.89,105a26.78,26.78,0,0,1-6.24-14.29,21.94,21.94,0,0,1,0-3.7,26.8,26.8,0,0,1,8.44-18,25.15,25.15,0,0,1,13.49-6.77,24.16,24.16,0,0,1,17.81,3.84,26.71,26.71,0,0,1,11.72,17.57,30,30,0,0,1,.45,3.66c0,.43,0,2.38,0,2.72a27.12,27.12,0,0,1-8.06,16.85A25.33,25.33,0,0,1,176,113.76,22,22,0,0,1,170.62,114.32Zm22.34-26c0-12.44-10.26-22.79-22.46-22.77S148.11,76,148.12,88.29c0,11.76,9.88,22.68,22.79,22.52C183.08,110.65,192.89,100.29,193,88.33Z"
            />
            <path
              className={styles.cls3}
              d="M134.78,68.45c-1,0-1.95,0-2.92,0-.32,0-.44-.08-.43-.42,0-.57,0-1.14,0-1.7,0-.28.08-.37.37-.37,1.91,0,3.82,0,5.73,0,.52,0,.72.17.65.71a7.5,7.5,0,0,0,0,1.34c0,.37-.13.46-.47.46-1,0-2,0-2.93,0Z"
            />
            <path
              className={styles.cls3}
              d="M178.82,98.41a10.28,10.28,0,0,1-3.69,4.38,9.06,9.06,0,0,1-3.25,1.28c-.32.06-.49.05-.49-.4,0-6.07,0-12.13,0-18.2a6.47,6.47,0,0,0,0-.88.91.91,0,0,0-.89-.85.82.82,0,0,0-.86.85c0,.91,0,1.83,0,2.75q0,8,0,16c0,.86,0,.86-.82.66a9.88,9.88,0,0,1-6.7-5.7,1.11,1.11,0,0,0-.66,1.14c.05.88,0,1.77,0,2.65a1,1,0,0,0,.35.81c.47.47.94,1,1.36,1.45a.92.92,0,0,1-.1,1.4.9.9,0,0,1-1.31,0,17,17,0,0,1-2.2-2.59.93.93,0,0,1-.15-.55c0-1.33.07-2.66.06-4a1.15,1.15,0,0,1,.36-.88c.49-.51,1-1,1.46-1.53a.57.57,0,0,0,.18-.57,17,17,0,0,1-.15-5.66c-1,0-2,0-3,0-.29,0-.3.16-.3.38,0,.7,0,1.4,0,2.11a1,1,0,0,1-.35.88c-1,.85-2.07,1.72-3.13,2.56a1,1,0,1,1-1.16-1.52c.74-.6,1.49-1.2,2.27-1.76a.82.82,0,0,0,.38-.77c0-.7,0-1.41,0-2.11a1,1,0,0,1,.45-.87,3.63,3.63,0,0,1,2.8-.91c.78.07,1.57,0,2.35,0a.39.39,0,0,0,.45-.32,5.42,5.42,0,0,1,.6-1.32c.18-.27.17-.44-.13-.67-.84-.63-1.64-1.33-2.48-2a1.18,1.18,0,0,1-.48-1c0-1.43,0-2.86.08-4.29a1,1,0,0,0-.42-.94c-.71-.52-1.38-1.09-2.07-1.64a1,1,0,0,1-.29-1.06,1,1,0,0,1,.81-.7,1,1,0,0,1,.86.26c.91.74,1.81,1.5,2.71,2.25a1.17,1.17,0,0,1,.39,1c0,1.45-.05,2.9-.08,4.34a.75.75,0,0,0,.24.68q1,.75,1.92,1.53c.18.14.28.13.43,0,.32-.32.65-.62,1-.91s.17-.43.12-.65a5.6,5.6,0,0,1,1.42-5.41c.24-.25.15-.36-.08-.54-.8-.65-1.59-1.32-2.39-2a1.07,1.07,0,0,1-.41-1.24,1,1,0,0,1,.95-.66,1,1,0,0,1,.75.29,35.15,35.15,0,0,1,3.2,2.91c.13.16.23.06.35,0a6.83,6.83,0,0,1,3.24,0c.18.05.21,0,.31-.11a31.23,31.23,0,0,1,3.24-3,1,1,0,0,1,1.42.19.87.87,0,0,1-.09,1.3c-.79.71-1.6,1.38-2.42,2.05-.33.27-.37.48,0,.83a5.41,5.41,0,0,1,1.21,5.23.54.54,0,0,0,.16.62c.41.36.76,1,1.2,1s.81-.6,1.25-.87a2.14,2.14,0,0,0,1.1-2.23c-.1-1.21,0-2.43,0-3.64a1,1,0,0,1,.4-.86c.83-.71,1.65-1.43,2.49-2.13.62-.53,1.18-.5,1.63.06s.27,1-.32,1.46-1.16.93-1.75,1.38a1.07,1.07,0,0,0-.48,1c0,1.41,0,2.82,0,4.23a1.39,1.39,0,0,1-.57,1.25c-.8.63-1.58,1.29-2.38,1.91-.23.18-.28.32-.12.57a3.31,3.31,0,0,1,.47.94c.15.73.59.85,1.26.81.91-.06,1.84,0,2.75,0s1.49.7,2.14,1.21c.13.1.06.3.06.45,0,.74,0,1.49,0,2.23a.75.75,0,0,0,.36.73c.72.53,1.43,1.08,2.13,1.64s.74,1,.36,1.5a1,1,0,0,1-1.56.06c-.94-.74-1.86-1.5-2.79-2.24a1.25,1.25,0,0,1-.51-1.12c0-.68,0-1.37,0-2,0-.3-.06-.45-.42-.43-.84,0-1.68,0-2.53,0-.33,0-.43.08-.39.43a13.22,13.22,0,0,1-.22,5.35c-.09.32.16.51.34.7.39.41.81.79,1.22,1.18a1.4,1.4,0,0,1,.44,1.09c0,1.31-.07,2.62,0,3.93a.84.84,0,0,1-.24.64c-.63.77-1.25,1.55-1.91,2.29a1,1,0,0,1-1.54.17,1.1,1.1,0,0,1,.12-1.56,5.35,5.35,0,0,1,.76-.81,2,2,0,0,0,.76-1.89,10.06,10.06,0,0,1,0-1.82A1.08,1.08,0,0,0,178.82,98.41Z"
            />
          </g>
        </g>
      </svg>
    </div>
  );
};

export default AnimatedBackground;
